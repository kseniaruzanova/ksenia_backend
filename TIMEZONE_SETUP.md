# Настройка определения часового пояса

## Описание

Система теперь автоматически определяет часовой пояс по координатам широты и долготы, используя TimeZoneDB API.

## Настройка

1. Получите бесплатный API ключ на [TimeZoneDB](https://timezonedb.com/api)
2. Добавьте переменную окружения в ваш `.env` файл:

```bash
TIMEZONEDB_API_KEY=your-api-key-here
```

## API Endpoints

### GET /api/geocoding/timezone

Получает часовой пояс по координатам.

**Параметры:**
- `lat` (number) - широта (-90 до 90)
- `lon` (number) - долгота (-180 до 180)

**Пример запроса:**
```
GET /api/geocoding/timezone?lat=55.7558&lon=37.6173
```

**Пример ответа:**
```json
{
  "success": true,
  "timezone": {
    "utcOffset": 3,
    "timezoneId": "Europe/Moscow",
    "timezoneName": "MSK",
    "countryCode": "RU",
    "countryName": "Russia"
  }
}
```

## Fallback

Если TimeZoneDB API недоступен, система использует простое определение часового пояса по долготе:

- -180 до -150: UTC-12 (Гавайи)
- -150 до -120: UTC-10 (Аляска)
- -120 до -60: UTC-8 (Тихоокеанское время)
- -60 до -30: UTC-5 (Восточное время)
- -30 до 0: UTC-3 (Атлантическое время)
- 0 до 30: UTC+0 (GMT)
- 30 до 60: UTC+2 (Восточная Европа)
- 60 до 90: UTC+3 (Москва)
- 90 до 120: UTC+5 (Екатеринбург)
- 120 до 150: UTC+7 (Красноярск)
- 150 до 180: UTC+9 (Владивосток)

## Использование на фронтенде

1. При выборе города из списка автоматически определяется часовой пояс
2. При изменении координат вручную можно нажать кнопку обновления часового пояса
3. Часовой пояс автоматически обновляется при изменении координат
