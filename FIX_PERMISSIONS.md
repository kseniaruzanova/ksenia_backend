# Исправление прав доступа для загрузки аудио на Ubuntu

Если аудио файлы не сохраняются на сервере Ubuntu, это обычно связано с правами доступа к директории `uploads/audio`.

## Быстрое решение

Выполните следующие команды на сервере Ubuntu:

```bash
# Перейдите в директорию проекта
cd /path/to/ksenia_backend

# Установите права на запись для директории uploads
sudo chmod -R 755 uploads/

# Если директории нет, создайте её
mkdir -p uploads/audio
sudo chmod -R 755 uploads/

# Проверьте владельца директории (замените 'your-user' на имя пользователя, под которым запущен Node.js)
sudo chown -R $USER:$USER uploads/
# Или если вы знаете имя пользователя:
# sudo chown -R your-user:your-user uploads/
```

## Если используется Docker

Если приложение запускается в Docker контейнере, проблема может быть в том, что volume монтируется с неправильными правами:

```bash
# Остановите контейнер
docker-compose down

# Исправьте права на хосте (вне контейнера)
sudo chmod -R 755 ./uploads/
sudo chown -R $USER:$USER ./uploads/

# Запустите контейнер снова
docker-compose up -d
```

## Проверка прав доступа

Проверьте текущие права:

```bash
ls -la uploads/
ls -la uploads/audio/
```

Вы должны увидеть что-то вроде:
```
drwxr-xr-x  user user  uploads/
drwxr-xr-x  user user  uploads/audio/
```

## Если проблема сохраняется

1. Проверьте логи сервера - там будет подробная информация о том, где именно происходит ошибка
2. Убедитесь, что процесс Node.js запущен от правильного пользователя
3. Проверьте, что директория `uploads` существует и доступна для записи

## Диагностика

Вы можете проверить права доступа изнутри приложения. В логах будут выведены:
- Текущий рабочий каталог
- ID пользователя и группы процесса
- Права доступа к директории
- Детальная информация об ошибках

Если видите ошибки типа `EACCES` или `EPERM`, это означает проблему с правами доступа.

